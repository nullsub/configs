\chapter{Netzwerkdateisysteme}
\section{NFS}
\begin{lstlisting}[style=Bash]
# apt-get install nfs-kernel-server nfs-common
\end{lstlisting}
In /etc/exports muss das Verzeichnis freigegeben werden:
\begin{lstlisting}[style=Bash]
/home       192.168.2.0/255.255.255.0(rw,async,no_subtree_check,no_root_squash)
/shared     192.168.2.0/255.255.255.0(rw,async,no_subtree_check)
\end{lstlisting}
Die Computenodes mounten das nfs mit folgendem /etc/fstab Eintrag:
\begin{lstlisting}[style=Bash]
192.168.2.1:/home /home nfs rw 0 0
192.168.2.1:/shared /shared nfs rw 0 0
\end{lstlisting}
Jedem Nutzer wird der Zufgriff auf das Verzeichnis gewÃ¤hrt:
\begin{lstlisting}[style=Bash]
$ sudo chmod a+rwx
\end{lstlisting}
\section{Paralleles Verteiltes Dateisystem}
Auf dem jedem brick NeIN auf der Partition /dev/sdaX:
\begin{lstlisting}[style=Bash]
# apt-get install glusterfs-server
\end{lstlisting}
neue partition 20gb
\begin{lstlisting}[style=Bash]
# fdisk /dev/sda
---------------
n <enter>
<enter>
<enter>
w
\end{lstlisting}
\begin{lstlisting}[style=Bash]
# apt-get install parted
# partprobe
\end{lstlisting}
\begin{lstlisting}[style=Bash]
# apt-get install xfsprogs
\end{lstlisting}
Filesystem auf sdaX xfs:
\begin{lstlisting}[style=Bash]
# mkfs.xfs -i size=512 /dev/sdX
# mkdir -p /data/bricki
\end{lstlisting}
/etc/fstab:
\begin{lstlisting}[style=Bash]
/dev/sdaX /data/brickN xfs defaults 1 2
\end{lstlisting}
\begin{lstlisting}[style=Bash]
mount -a && mount
\end{lstlisting}
Nur auf einem Node:
\begin{lstlisting}[style=Bash]
# gluster peer probe 192.168.2.10
# gluster volume create striped-volume stripe 2 
    192.168.2.1:/data/brick0 192.168.2.10:/data/brick1
# gluster volume start striped-volume
\end{lstlisting}
Auf jedem Node:
\begin{lstlisting}[style=Bash]
# mkdir /fastfs 
%# mount.glusterfs 192.168.2.10:/striped-volumefastfs
\end{lstlisting}
/etc/fstab:
\begin{lstlisting}[style=Bash]
192.168.2.10:/striped-volume /fastfs glusterfs defaults,_netdev 0 0
\end{lstlisting}
Striped weil fast(schnell), aber wenn ein Knoten kaputt, alles kaputt:\\
write speed /home: ~ 350MB/s\\
write speed /fastfs: ~ 40MB/s\\
write speed /shared: ~ 336MB/s\\
